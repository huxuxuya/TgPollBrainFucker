# Рефлексия по задаче: VAN-ревизия TgPollBrainFucker

**Основные этапы и достижения:**
- Модуль carpool интегрирован, deep-link работает, сценарии wizard исправлены.
- Целевая сумма сбора теперь корректно редактируется и сохраняется.
- Прогрессбар стал компактнее и лучше подходит для мобильных, теперь отображает процент.
- Весь код снабжён подробным логированием для дальнейшей отладки.
- Исправлены баги с MarkdownV2, deep-link, wizard-контекстом, message_id, условиями выхода из text_handler.

**Сложности и вызовы:**
- Telegram API требует строгого экранирования спецсимволов в MarkdownV2.
- Неочевидные баги с wizard-сценариями и message_id.
- Telegram не позволяет убрать картинку из сообщения, только заменить на «пустую».

**Уроки и улучшения:**
- Важно всегда экранировать пользовательские данные для MarkdownV2.
- Для удаления картинки в Telegram приходится использовать прозрачные PNG-заглушки.
- Подробное логирование критично для сложных сценариев и отладки.

**Рекомендации:**
- Продолжать модульное развитие, расширять тесты.
- Описать архитектуру и связи между модулями.
- Доработать документацию по web apps и тестовому покрытию.

