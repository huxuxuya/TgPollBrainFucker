# Архив: VAN-ревизия TgPollBrainFucker (2024-07-14)

## Краткое описание
Проведён глубокий VAN-обзор и ревизия Telegram-бота TgPollBrainFucker для продвинутых опросов и фандрайзинга (SQLite/Postgres, SQLAlchemy, Alembic, тесты, модульная архитектура).

## Основные этапы
- Модульность и carpool: реализован и интегрирован модуль рассадки по машинам.
- Обработка /start и deep-link: делегирование через реестр poll-модулей.
- Исправления MarkdownV2: строгая функция экранирования.
- Wizard-сценарии: исправлены баги с message_id, условиями, логированием.
- Фандрайзинг: редактирование и сохранение целевой суммы, прогрессбар с процентом.
- Логирование: подробное на всех этапах.
- UX: устранены баги с wizard-контекстом, message_id, условиями выхода.

## Итоги
- Модуль carpool интегрирован, deep-link работает, сценарии wizard исправлены.
- Целевая сумма сбора теперь корректно редактируется и сохраняется.
- Прогрессбар стал компактнее и информативнее.
- Весь код снабжён подробным логированием.

## Рефлексия
См. файл [reflection.md](../../reflection.md)

## Рекомендации
- Продолжить модульное развитие, расширять тесты.
- Описать архитектуру и связи между модулями.
- Доработать документацию по web apps и тестовому покрытию.

