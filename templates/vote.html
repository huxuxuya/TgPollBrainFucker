<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- JINJA: title -->
    <title>{{ poll_title }}</title>
    <style>
        :root {
            --tg-bg-color: var(--tg-theme-bg-color, #ffffff);
            --tg-text-color: var(--tg-theme-text-color, #000000);
            --tg-button-color: var(--tg-theme-button-color, #2481cc);
            --tg-button-text-color: var(--tg-theme-button-text-color, #ffffff);
            --tg-hint-color: var(--tg-theme-hint-color, #999999);
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            margin: 0;
            padding: 15px;
            background-color: var(--tg-bg-color); 
            color: var(--tg-text-color);
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
        }
        h1 {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .options-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .option-item {
            background-color: var(--tg-button-color);
            color: var(--tg-button-text-color);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            text-align: center;
            font-size: 18px;
            cursor: pointer;
            transition: transform 0.1s ease;
        }
        .option-item:active {
            transform: scale(0.98);
        }
    </style>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <!-- JINJA: poll_title -->
        <h1>{{ poll_title }}</h1>

        <ul class="options-list">
            <!-- JINJA: poll_options loop -->
            {% for option in poll_options %}
                <li class="option-item" data-response="{{ option }}">{{ option }}</li>
            {% endfor %}
        </ul>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();

        // JINJA: poll_id
        const pollId = "{{ poll_id }}";

        document.querySelectorAll('.option-item').forEach(button => {
            button.addEventListener('click', () => {
                const responseText = button.getAttribute('data-response');
                
                const dataToSend = {
                    poll_id: pollId,
                    response: responseText
                };

                // Отправляем данные и закрываем Web App
                tg.sendData(JSON.stringify(dataToSend));
                tg.close();
            });
        });
    </script>
</body>
</html> 